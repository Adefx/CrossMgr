[TOC]

# Properties
Allows you to configure properties of the race itself.  Specific properties of each Category are defined in the Category screen.

# Property Screen

## General Options
Property|Description
:-------|:----------
Event Name|Name of the event.  Also used in the filename with the Race #.  Multiple races in the day will have the same Event Name, but with different race numbers.
Date|Date of the race.  Used in the filename and all output.
Race #|The number of the race in the day at the event.  Also used in the filename.  This is automatically incremented when you do "File/New Next..."
Scheduled Start|Scheduled start of the race.  This is used in the results output.  Of course, the race could actually start at a different time.
Race Minutes|The number of minutes in the race for timed races (like CycloCross).  See __Notes__ below.
Discipline|The type of race (default Cyclo-cross).  This should reflect the type of race (Road, Mountain Bike, Criterium, etc.).  Currently, this is only used in the [USAC Export][].
Organizer|Organizer of the race.  Included in the HTML results output.
Commissaire|The name of the race official.
Memo|Anything you wish to type in here (weather conditions, your mood, etc.).  This is saved with the race but does not appear on any output.

### Notes
Races can be run by time, or by laps, or both simultaneously for different categories:

* If you enter a number in the __Race Laps__ field in [Categories][], that category will be run by the specified laps.
* If the __Race Laps__ field is blank, CrossMgr will compute the number of laps based on the category leader's lap time divided into the __Race Minutes__.  While the race is under way, this is visible in the Race Progress charts at the bottom of the [Record][] screen.  It is also visible in the __CrossMgr Estimated Laps__ column in [Categories][].
* If all categories have a specified __Race Laps__, then the __Race Minutes__ field will not be used.

You can set or change the __Race Laps__ at any time before, during or after a race.
If you don't like CrossMgr's estimate of the laps, by all means, override.

See the [Record][] screen for details on managing a race with one lap counter, or multiple lap counters.

## Race Options
Property|Description
:-------|:----------
Time Trial|Specifies Time Trial mode.  In this mode, the first time recorded for a rider starts the clock for that rider, rather than the start of the race.  See [Further Explanation](#time-trial-mode).
All Categories Finish After Fastest Rider's Last Lap|Applies to multi-category races only.  Tells CrossMgr that all riders were stopped after the fastest rider in the race finished.  This means you stopped riders lapped by the fastest Category leader, but not lapped by their own Category leader.  This option is ignored for all Categories with "Race Laps" specified (see [Categories][]).
Set "Autocorrect Lap Data" option by Default|If true, CrossMgr sets the Autocorrect option by default when a rider is added to the race.  See [RiderDetail](RiderDetail.html) for details about Autocorrect.  If false, the Autocorrect option will not be set when a rider is added to the race.  You can change the Autocorrect option by rider in RiderDetail.  You can also enable/disable Autocorrect for all riders at once with "Edit/Enable Autocorrect for All Riders" and "Edit/Disable Autocorrect for All Riders".
Distance Unit|km or miles for the distances specified in Categories
Show Times to 100s of Second|You choice to display regular seconds or fractions of seconds in Results and History.  Also configurable from the Options menu.
Lap Time for 80% Rule|Selects which lap you want to use to calculate the 80% time elimination rule.  If the first lap is significantly longer or shorter than the other laps, choose __2nd Lap Time__.  If the first lap is similar to the length of the other laps, choose __1st Lap Time__.  In Cyclocross, there is often a run-up which makes the first lap longer.  Sometimes it is possible time the run-up, sometimes this is difficult, and it is better to use the 2nd lap to compute the 80% time rule.  In MTB, it is often better to use the 1st lap time.
Distance Unit|The units distances to show in Results.
Hide Lap Notes, Edits and Projected Times in HTML Output|If set, none of the internal lap edits will be written to the HTML page.  If clear, all of the lap edits will be available in the HTML page by setting the "Show Details" option on the Race Chart.  The lap information is shown similarly to the Chart screen.

## Notes
Text that will appear in the HTML output.  Text entered here will be shown as-is in the HTML web page, including line breaks.  Describe weather conditions, or give credit to the CrossMgr operator and number caller.

You can also embed Html tags in notes.  To do so, your input must then start with `<html>` and end with `</html>`.  With Html tags, you can specify a hyperlink to a URL with `<a href="http://XXX">HyperLink</a>`, use a list with `<ol></ol>`, etc.  When using Html, you control your own line breaks: insert `<br/>` where you want a newline.

For example:

    <html>
    <h2>Big Race</h2>
    <p>
    Organizer: <strong> <a href="mailto:organizer.email@gmail.com">Email: Awesome Organizer</a> </strong> <br/>
    CrossMgr Operator: <strong> <a href="mailto:operator.email@gmail.com">Email: Awesome Operator</a> </strong> <br/>
    </p>
    </html>

Notes can also contain variables that are automatically substituted from race values.  Variables have the form "{=VariableName}" (no spaces around the "{", "=" or "}").  For example:

    <html>
    <h2>{=EventName}</h2>
    <h2>{=City}, {=StateProv}, {=Country}</h2>
    <p>
    Organizer: <strong> <a href="mailto:organizer.email@gmail.com">Email: {=Organizer}</a> </strong> <br/>
    Commissaire: <strong> {=Commissaire} </strong> <br/>
    Start Time: <strong> {=StartTime} </strong> <br/>
    Start Method: <strong> {=StartMethod} </strong> <br/>
    </p>
    </html>

The "{=VariableName}" values will be substituted with the actual race values.

Variables can be conveniently inserted from the "Insert Variable..." button.

Of course, variables can be used without the `<html>` option.

Variables are case sensitive, so be careful.  The supported variables are:

Variable|Value
:-------|:----
{=EventName}|Name of the event as specified in General Options
{=RaceNum}|Race number as specified in General Options
{=City}|City as specified in General Options
{=StateProv}|StateProv as specified in General Options
{=Country}|Country as specified in General Options
{=Commissaire}|Commissaire as specified in General Options
{=Organizer}|Organizer as specified in General Options
{=Memo}|Memo as specified in General Options
{=Discipline}|Discipline as specified in General Options
{=RaceType}|"Time Trial" if the the Time Trial flag is set, otherwise "Mass Start"
{=RaceDate}|Date of the race as specified in General Options
{=InputMethod}|Data input method.  Either "RFID" or "Manual".
{=StartTime}|Actual start time of the race if the races is started, else the "Scheduled Start Time" from General Options.
{=StartMethod}|Either "Automatic: Triggered by first tag read" or "Manual"
{=CameraStatus}|Either "USB Camera Enabled" or "USB Camera Not Enabled"
{=PhotoCount}|Number of photos taken during the race.  Will be zero if the usb camera is not enabled.
{=ExcelLink}|The file and sheet name of the Excel sheet linked to this race.
{=GPXFile}}|The file name of the course in GPX format.

## RFID Options
Property|Description
:-------|:----------
Use RFID Reader|Use an RFID reader in the race.  When set, CrossMgr will act as a "server" that can receive real-time messages from a RFID reader.  The reader can be JChip, or the CrossMgrImpinj or CrossMgrAlien bridge programs that communicate with the Impinj and Alien readers, respectively.  See [RFID Reader Setup](Menu-ChipReader.html#rfid-reader-setup-dialog) for details.

### Manual Start: Collect every chip. Does NOT restart race clock on first read.
This option records tags the same as if you entered them manually.  Every tag that is read will be recorded.
The race is started manually.

### Automatic Start: Reset start clock on first tag read. All riders get the start time of the first read.
After the race is started with the Start button, this option resets the race clock to zero on the first tag read.
It also ignores the first tag read for all riders.
After this initialization process which starts the race clock, every tag read will be recorded.

This idea behind this feature is that the riders are stages behind the start line.
After the whistle, the first rider to the line "starts" the race.  All tags are recorded after that.

### Manual Start: Skip first tag read for all riders. Required when start run-up passes the finish on the first lap
After the race is started with the Start button, this option ignores the first tag read for all riders.

The idea behind this feature is that the riders are staged in a start area behind the finish line (say, 200m).  When the race starts, the riders pass the finish line - and the reader antennas.  You do not want to register this tag read as it "does not count".

When using this feature, be sure to set the "First Lap Distance" in [Categories][] to compensate for the run-up distance.  This will ensure that the riders speeds are computed correctly.

## Camera Options

### Options

Option|Description
:-------|:----------
Do Not Use Camera for Photo Finish|USB Camera not used
Photos on Every Lap|Records a photo from a connected USB camera on every number entry on every lap.  See [Notes](#use-usb-camera-photo-finish) below for details.  Currently, the USB Camera option is only available on the Windows platform.
Photos at Race Finish Only|This option tells CrossMgr to record photos one minute before the leader's finish time for each Start Wave.  If the leader has not yet finished, CrossMgr uses leader's expected time.  If the leader's time is known, CrossMgr uses the leader's actual finish time.  If this option is disabled, CrossMgr will record photos of every rider on every lap.  If this race is a time trial, this option has no effect and photos will be recorded on every lap.

### Camera Device
Tells CrossMgr which USB camera device to use.  Normally, the external USB camera default is __device 0__, so you don't need to change this.

But... on some PCs, the built-in camera is __device 0__ and the external USB camera is __device 1__.
If this is the case on your computer, set __Camera Device__ to __1__.

If you have multiple USB cameras plugged into the computer (not recommended as it is confusing!), you might need to set __Camera Device__ to another value to get the camera you want.

### Notes:

The purpose of "Photos at Race Finish Only" is to avoid filling up your disk with uninteresting photos during the race.  This feature is especially useful for high-lap races like criteriums.  Aside from the space required, there is no problem with recording photos every lap, and you may wish to do for the additional information it provides.

When using the "Photos at Race Finish Only" option, be aware that sometimes CrossMgr does not know who the leader is.  Especially during a criterium, this can happen if the leader takes a free lap and CrossMgr does not auto-correct it, or in any race type, the leader might have a missed read.

This is the reason for the policy of recording photos one minute before the expected leader - this makes it more likely that the leader will be included if misclassified during the race.

One the leader of a Start Wave has been recorded, photos for all riders in the Start Wave will be recorded.  The same reason applies: CrossMgr may not know what lap a particular rider is on with 100% accuracy if the rider has take free laps or had missed reads.  This means that lapped riders may have their photo recorded twice.

When using CrossMgr for track races, be advised that its policy of recording all photos 60 seconds in advance of the leader may result in photos of all riders for up to the last 4 laps (depending on the length of the track).

Regardless of the "Photos at Race Finish Only" option, CrossMgr will "open" the USB camera when the race starts.  This is because opening and initializing the USB Camera can take a few seconds - too long to capture a photo when needed.  The camera must remain connected for the duration of the race.

## Animation Options
These only apply to the Track animation.  If you are using an uploaded GPX file, the animation will follow the GPX path.

Property|Description
:-------|:----------
Animation Finish on Top|Tells the animation to finish on the top rather than on the bottom.  Also changes HTML output to match.
Animation Reverse Direction|Runs the animation from right-to-left (clockwise) instead of the usual left-to-right (counter-clockwise).  Also changes HTML output to match.

## Files
Excel Sheet|Externally Linked Excel Sheet name.
Categories Imported From|File name of the categories import file.  Of course, the Category properties can be changed afterwards.
File Name|File name generated for this race.

# Further Details:
## Time Trial Mode
Time Trial mode is a special mode that works differently from the regular race mode.  In TT mode, the first read for a rider starts his/her clock, and subsequent reads are all taken with respect to the rider's start time.

TT start times can also be imported into CrossMgr from an Excel spreadsheet (see [DataMgmt][] for details).  This spreadsheet simply requires a header row with at least two columns: the Bib number, and the Start Time (always remember that Start Time is in __Race__ time, that is, the time after the stopwatches are synced, not clock time).  When start times are imported, each rider's time will start automatically at the imported Start time.

Otherwise, the first input for a rider is taken as his/her start time.

TT mode works with manual input and JChip.  TT results are computed relative to the rider's ride time.

TT penalties and/or adjustments can be made afterwards.  You can add a note to describe what you did.  See the "Note..." feature in [Chart Right-Click][].

## Use USB Camera for Photo Finish
Windows Only (currently).

This option tells CrossMgr to take a picture with a USB webcam every time it gets a number during the race.
It works with a chip reader, as well as manual input.
In addition to making nice pictures of the event for publishing later, this feature is useful in resolving disputes.

CrossMgr automatically looks for a USB webcam plugged into a USB port.  If it does not find one there, and you have a built-in webcam, it might find the built-in one (not what you want!).  Make sure the USB camera is plugged in and working before starting the race.

The USB camera feature can be turned on and off during the race at any time.  You can turn it on at the start, off in the middle, then on again to capture the last laps and the finish.

Photos are saved in a folder created in the same location as the race.  The Photo folder has the same name as the race with with "_Photos" added to the end.  The photo files have the following format: "bib-XXXX-time-HH-MM-SS-DD.jpg" where XXXX is the bib number, HH, MM, SS and DD are hours, minutes, seconds, and decimal seconds, respectively.
A footer is written on each photo including the rider's Bib number, the Race Time and the Current Date/Time.

Although the pictures taken are far smaller than recording the entire video on disk, they can still take a lot of space.  Make sure you have lots of disk space available to accommodate the potential 500 (or more) pictures that might be taken.

Get a good USB camera.  Some good ones are available for about $100.  Make sure the camera can focus on far-away objects (some webcams are only intended for faces in front of a computer).  Use a tripod or other stable support.  Use the camera's included software to frame the shot. 

For performance reasons, CrossMgr opens a connection to the USB webcam at the start of the race and closes it at the end.  Do Not Disconnect the USB Camera during the race!  This may cause CrossMgr to lock up.  Of course, you can always close CrossMgr and restart it if this happens.

There are many considerations when setting up the camera to get good shots.  The first issue to consider is "latency".  There are always small delays in the communication and response of the camera.  If the camera is aimed at the finish line with a very narrow field of view, the riders may be out of the frame before the camera gets the signal to take the picture.

When using Chip timing, CrossMgr takes 25 photos a second and maintains a buffer of 4 seconds.  When it receives a chip time, it chooses the photo closest to that time.  This solves the problem of communication and response latency between the reader to the computer.

With manual timing, CrossMgr triggers the camera as soon as it logs the entry and before it updates the screen.

It is recommended to configure the camera with a wider field of view and position it more facing the riders (or looking backwards if you need to see the numbers).  With this angle, it is more likely that the riders will be in the shot.

Some USB cameras have an auto-focus feature that is fast enough to follow a moving subject.  However, some cameras cannot refocus fast enough and the riders will always appear blurry (turn it off in this case).  Check what works best.

Also, check the shutter speed of the USB camera with its driver software.  It is often possible to increase the shutter speed as high as 1/1000th of second.  This weill reduce blurry pictures, however, a fast shutter speed requires good lighting conditions.  You may need to experiment to find the best balance.

The second issue is lighting.  Aiming the camera into the sun will "blind" it, and the riders will appear as dark blotches on a white background.  Some experimentation will be required, and don't be surprised if you have to change the camera position throughout the day to compensate for changing lighting conditions.  Periodically review what the camera is seeing.

## Question: When is a Rider in the Race?
CrossMgr considers a rider in the race if (a) there is a time entry for the rider or (b) the rider Status (DNS, DQ, etc.) is set.  It does not automatically add all riders described in the Excel sheet.

DNS riders can be added all at once from the spreadsheet after the race.  See [DataMgmt][] and the __Add DNS from External Excel Data...__ section.

# Controls

## Commit
Commits your changes to CrossMgr.  Changing screens will commit your changes automatically.

## Link External Excel Sheet
Allows you to link to an [External Excel][] sheet right from this page.  See [DataMgmt][].
