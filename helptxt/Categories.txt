[TOC]

# Categories

A race category is a pattern of numbers ranked together - it does not have to be the same as the category that appears on a rider's license code.

It is easy to change the categories of a race before, during and afterwards.  A rider can be moved between categories before, during and after a race too.

Ideally, each category in the race would have a unique number range, for example 1-99 would be in one category, 100-199 would be in another, etc.
This is not only easier to configure in CrossMgr, it makes it easy for riders and race officials to know the set of competitors in the same race.

It is commonplace to combine categories together into a single start (for example, Elite Women and Master Women, or Cat 3 and Cat 4).

Sometimes prizes are only given for the combined finish.  Sometimes prizes are also given for each component category in the combined race.  Ranking by component category can also be important for upgrade points.

Sometimes there are special ranking criteria.  For example, although non-Canadian nationals are allowed to compete in the Canadian National Road Race, only Canadian Nationals are eligible for the Canadian National Champion ranking.

Sometimes organizers come up with creative ranking criteria.  For example, a ranking for "Fastest Non-Elite Women" even though the Masters Women and Junior Women are in different start waves.

CrossMgr makes this easy by supporting three types of Categories:

1. **Start Wave:** a group of riders that start at the same time.  The riders may all be in the same category, or they may be made up of multiple component categories riding together.  A "Start Wave" may, or may not have "Components".  Riders in a "Start Wave" are considered in the same race, and can work together.  Each "Start Wave" is managed in CrossMgr with a race progress bar.
1. **Component:** a sub-group of riders part of a "Start Wave", all of which are in the same category with respect to each other.  Riders in a "Component" can work together with other riders in their "Component", as well as other riders in their "Start Wave".  "Component" categories use the same "Start Offset", "Race Laps" and other options as their "Start Wave".
1. **Custom:** a group of riders defined by any criteria - they don't need to be part of the same "Start Wave".  A "Custom" category could be a completely made-up ranking of riders.

## Step by Step Configuration

### Combined Categories

For example, say that you have Elite Women (1-99), Master Women (100-149) and Junior Women (150-199) and you want to combine them in the same Start Wave.
Define those Categories in CrossMgr as "Elite", "Master" and "Junior" including the Name, Gender and Numbers fields.

Now, press the "New Category" button, and change the new category name to "Combined Women".

Press and hold on the grey cell (first cell in the row) of the "Combined Women" and drag the row up to just before the "Elite" row.

Click on the "Category Type" cell in the "Elite Row".  Press the "left-cursor" key to change it to a "Component" category.  Then press the "down-cursor" button to move to the next row.  A number of fields in the Elite row have turned dark grey.  This is because those values will now come from the "Start Wave", category, not the "Component" Category.

Continue doing "left-cursor" and "down-cursor" to set the Master and Junior categories to "Component" (of course you can change these with the mouse, but the keyboard is faster).

Finally, press the "Update Start Wave Numbers" button at the top of the screen.  This combines the number ranges in the "Elite", "Master" and "Junior" into the "Combined Women" "Start Wave" category.
**This button is pressed automatically when you leave the page, so don't worry if you forget.**

You can configure as many "Start Wave" combined categories you like.  The "Start Wave" is always the first row, followed by the "Component" rows.

CrossMgr makes the following assumptions about bib numbers in a race:

* **All numbers in a Race are unique**.  If the number ranges for two "Start Waves" overlap, CrossMgr will consider the rider to be in the **first** matching "Start Wave"
* **All numbers in a "Start Wave" are unique**.  If the number ranges for two "Components" overlap, CrossMgr will consider the rider to be in the the **first** matching "Component" in the "Start Wave".

Decide what you want to do with the "Start Wave" and "Component" categories:

* Do you want them to be uploaded to CrossResults, WebScorer or USA Cycling?  Check the selection in the "Upload" box.
* Do you want them to be included as part of a race Series (using SeriesMgr)?  Check the selection in the "Series" box. 

### Custom Categories

"Custom" categories are just a set of Numbers.  The Numbers don't all have to be in the same "Start Wave".  Riders in a "Custom" category are first scored with respect to their actual "Start Wave", then re-scored **as if** they all started in the same "Start Wave".

No checking is done on numbers in a "Custom" category - you can enter any number ranges you want.
"Custom" category number ranges **can overlap with any other categories**.  A rider may appear multiple times in "Custom" categories.

For example, consider the following "Custom" categories which could be active in the same race (let's say that the number ranges have been configured):

* All Riders with Green Jerseys
* All Riders with Green Jerseys and Black Shorts
* All Riders with Black Shorts

Riders would be ranked as:

* If Adam is wearing a Green Jersey and Black Shorts, he would appear in all three "Custom" categories.
* If Betty is wearing a Red Jersey and Black Shorts, she would appear in the "All Riders with Black Shorts" custom category.
* Is Calvin is wearing an Orange Jersey and White Shorts, he would not appear in any of these "Custom" categories.

Decide what you want to do with the "Custom" category:

* Do you want it to be uploaded to CrossResults, WebScorer or USA Cycling?  Check the selection in the "Upload" box.
* Do you want it to be included as part of a race Series (using SeriesMgr)?  Check the selection in the "Series" box. 

# Controls

## Drag and Drop Rows
Category rows can drag-and-drop by pressing in the cells under the "up-down" arrow.  The "up-down" arrow is in the upper-left of the Categories table.

## Activate All
Activate all Categories.  Active Categories will be considered in the race.

## Deactivate All
Deactivate all Categories.  Deactivated Categories will not be considered in the race.

## New Category
Add a new Category to the race.

## Delete Category
Delete an existing new Category to the race.  Click anywhere on the row of the Category you want to delete, then press this button.

## Move Up
Move a Category up in the table.  Click anywhere on the row you want to move and press this button.  The number ranges of this category will be considered before all subsequent categories (see explanation below).

## Move Down
Move a Category up in the table.  Click anywhere on the row you want to move and press this button.  The number ranges of this category will be considered after all preceding categories (see explanation below).

## Add Bib Exception
Allows you to automatically add a bib exception to a selected category.  This action also adds the appropriate exceptions to the other categories.  Although you can do this here, it is more convenient to manage category exceptions directly from the [RiderDetail](RiderDetail.html) screen.

## Update Start Wave Numbers
Press this button to automatically adjust the Start Wave category to include all the Component categories numbers.  **This button is pressed automatically when you leave the Categories page.**

# Category Screen

The Category screen is a table with the category details:

Property|Description
:-------|:----------
Active|If selected, this Category will be considered in the race.  If deselected, this Category will be ignored.  Some CrossMgr users configure an external Category file with all possible categories in it.  The then select only the categories that are in this race.
Category Type|Either "Start Wave", "Component" or "Custom"
Name|Name of the Category
Gender|Gender of the Category.  Choices are "Men", "Women" or "Open".
Numbers|The numbers of riders in this Category.  Numbers can be expressed individually like 103,105 or a range, like 100-199.  Exclusions exceptions are expressed by preceding the excluded number with a '-' sign.  Exceptions can be express individually, like -201,-205 or in a range -201-205.  See [Number Patterns](#number-patterns) for more details below.
Start Offset|When starting multiple categories at the same time, here is where you enter the offset of later starts from the first start.
Race Laps|When running a race by time, leave this blank - CrossMgr will use the Suggested Laps (see below).  If you know the number of laps, or you don't like CrossMgr's suggestion, enter the laps here.
Lapped Riders Continue|If selected, riders who are lapped by their category leader will have all their laps shown in the Results, not just the laps completed before they were lapped.
Distance|The distance of the lap or the race (depends on the value of the next column).  The distance unit will be what you configured in Properties.
Distance is By|This field is either "Lap" if the distance you entered is by lap, or "Race" if the distance is for the entire race.  If distance is by "Race", CrossMgr will not compute lap speeds as it does not know the lap distance.  Generally, you would only use Distance by Race if the race was a point-to-point race, or if the laps were not the same distance.
First Lap Distance|Fill in this field if the first lap of your race is not the same as the subsequent laps.  This can happen in many situations, for example, when the rider staging area is not at the start/finish line.  If there is a run-up to the start, make the first lap longer than the rest of the laps.  For example, if the lap distance is 3.6km, and there is a 200m run-up to the start, make the first lap 3.8km, and do not log riders mapping the finish after the run-up.  If you are using chip timing, see appropriate chip timing start options here [Actions][].
80% Lap Time|This is computed by CrossMgr.  It is the maximum time a rider can fall behind the leader before being a candidate to be pulled in a UCI CycloCross or MTB race.  It is computed as 80% of each category leader's first lap time.  If the first lap distance is not the same as the regular lap distance (see above), the second lap time is used.  Riders outside the 80% time boundary are shown in red in the [Expected](Expected.html#expected) screen.
Suggested Laps|Computed by CrossMgr.  Important if you are running a race by time rather than laps.  The "Race Laps" column overrides this field if you don't like CrossMgr's suggestion.
Upload|If selected, this Category will be included in CrossResults, WebScorer and USAC publish.
Series|If selected, this Category will be included as part of a Series in SeriesMgr.

## Number Patterns
Number patterns are expressive and flexible, and are used to identify the number range of riders in a Category.

For example, each Category could have number in a simple range like 1-99, 100-199, etc.

You should always assign a number range to each Category ahead of time.  Hand out numbers to riders consistent with the Category range - not "off the top of the pile in the order the riders showed up".
This is a common first-timers mistake.

Category number ranges make it trivial for riders, officials and you to know a rider's Category just by his/her number.  This greatly reduces all sorts of errors at the race.  It allows anyone to quickly ensure riders are in the right race, at the right start, for riders to know their competitors in a mixed-category race, and for officials to follow what is going on.

Consistent number ranges by Category are essential at high-level races for applying the 80% rule and pulling riders in a category.
Be a pro - assign number ranges to Categories.

Of course, sometimes numbers don't follow simple ranges, and CrossMgr can handle that too.

For example, consider "100-199, -151, -155, 205, 220-229, -170-179".

This complex example matches the numbers from 100 to 199, excluding 151 and 155, including 205, 200 to 229 and excluding the range 170-179. 
Of course, this is insanity for riders and officials.

If you have a lot of exceptions, it can be easier set the exception from the [RiderDetail][] screen rather than from Categories.   Assigning the category from [RiderDetail][] automatically takes care of the number patterns.

To find the category of a rider, CrossMgr starts with the first active category and checks for a match in the number pattern.  If that fails, it continues to the second active category, etc.  The first active Category that matches the rider's number is considered the rider's Category for the race.
 
## Scoring a Race Multiple Ways

Say you have categories like U17 Men, U19 Men, Junior Men, etc. and you want to score the race by fastest Men?
Or, you have ability-based categories, but you want to score the race by Age?

This is possible.

CrossMgr categories are specified by number ranges.  It is possible to have overlapping number ranges.  To control the Categories you want, use the "Active" flag.
For example, say the regular categories are:

Category|Number Range
:-------|:-----------
U17 Men|100-199
U19 Men|200-299
Junior Men|300-399

You can make a new category as follows:

Category|Number Range
:-------|:-----------
All Men|100-399

Now, if you make this category Active, and make the regular categories inactive, the race will be rescored by the combined category (just flip to Results to see it).

If two Categories have overlapping number ranges, the number will be assigned to the first one that matches in the list (top-down).

This can be used for a "Catch-All" Category.  For example, you can make a category with the number range 1-999 and put as the last Category.  Any numbers not matching Categories above will be matched by the "Catch-All".  This can be a useful check if you have numbers in the race that are not part of any category.
 
## Question: Why does CrossMgr configure lap distance by Category instead of the entire race?

Well, sometimes different categories have a different lap distance, especially in a time trial.  To provide for this flexibility, CrossMgr requires the lap distance at the Category level, not the race level.

Yes, it's a little extra trouble, but with copy-and-paste (Ctrl-C, Ctrl-V), it isn't so bad.  It is great to have this flexibility when you need it.